<?php// This response is ordinary HTML:header('Content-Type: text/html');?><!doctype html><html><body><form id='devform'>Endpoint: <input name='endpoint' type='text' placeholder='entity/create'><br><input type='button' value='Change between raw JSON/ JWS' onmousedown='switchMode()'><br><div id='mode.0'>JSON<br><textarea name='json' style='width:100%;height:300px;'></textarea></div><div id='mode.1' style='display:none;'>JWS<br><textarea name='jws.head' style='width:100%;height:200px;' placeholder='Header'></textarea><br><textarea name='jws.phead' style='width:100%;height:200px;' placeholder='Protected Header'></textarea><br><textarea name='jws.payld' style='width:100%;height:200px;' placeholder='Payload'></textarea></div><br><br><input type='button' value='Send' onmousedown='send()'/><br><br><div id='result'></div></form><script type='text/javascript' src='/js/util.js'></script><script type='text/javascript'>var API={	Version:1,	Endpoint:'/',	Loading:'Loading - Just a moment..',	AvailableObjects:{}};var currentMode=0;function switchMode(){	changeMode(currentMode?0:1);}function changeMode(mode){		currentMode=mode;		for(var i=0;i<2;i++){		var box=document.getElementById('mode.'+i);				if(i==mode){			box.style.display='';		}else{			box.style.display='none';		}			}	}function send(){		var form=document.getElementById('devform');		var endpoint=form['endpoint'].value;		var res=document.getElementById("result");	res.innerHTML='Loading..';		var json;		if(currentMode==0){			json=form['json'].value;		}else{				if(!currentKey){			res.innerHTML='No private key to sign with! Open the console and call loadKey("hex_of_your_private_key");';			return;		}				var header=form['jws.head'].value;		var phead=form['jws.phead'].value;		var payload=form['jws.payld'].value;		json=jws(header,payload,phead);				console.log(json);			}		request(endpoint,function(){		console.log(request.responseText);		res.innerHTML=request.responseText;	},json);	}function signIPs(domain){		if(!currentKey){		throw new Error("No key loaded. Use generateKey() or loadKey('private_key_kex') first.");	}		var request={entity:domain};		requestJson("entity/visibility",function(d){				if(d.type){			// It's an error.			console.log(d);		}else{			// Set of IPs. Sort alphabetically asc:			d.ips.sort();						// Get as a string:			var ipString=JSON.stringify(d.ips);						// Get the time in ms:			var timeMS=new Date().getTime();						// Sign it (base64 already):			var sig=sign(ipString,currentKey);						// The complete record is then:			var record='opentx sig:'+sig+'@'+timeMS;						console.log(record);					}			},request);	}</script></body></html>